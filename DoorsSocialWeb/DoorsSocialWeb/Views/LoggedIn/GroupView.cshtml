@model DoorsSocialWeb.Models.ViewModels.GroupViewModel

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title></title>
</head>
<body>
    <div>
        @if (Model.currentGroup.groupName != null && Model.currentGroup.groupName != "")
        {
            <h1>@Model.currentGroup.groupName</h1>
        }
        @if (Model.currentGroup.groupDescription != null && Model.currentGroup.groupName != "")
        {
            <h1>@Model.currentGroup.groupDescription</h1>
        }
    </div>

    <div>
        @if ((!(Model.userIsMember(Model.currentUser.Id)) && Model.currentUser.Id != Model.currentGroup.groupOwnerID))
        {
                using (Html.BeginForm("requestToJoinGroup", "LoggedIn", FormMethod.Post))
                {
                    <input type="hidden" name="userid" value="@Model.currentUser.Id" />
                    <input type="hidden" name="groupid" value="@Model.currentGroup.ID" />
                    <input type="submit" value="Click me to request to join this group" />
                }
        }
        @if(Model.currentGroup.groupOwnerID == Model.currentUser.Id)
        {
            <!--ACCEPT USERS-->
            <!-- Búa til fall sem sækir öll request's-->
            <!-- og birtir þau hér, með html form sem hann getur samþykkt og þá vistast sá notandi í gagnagrunnin-->
            if (Model.pendingRequests(Model.currentGroup.ID) != null)
            {
                <!--Foreach skilar mér requestuserIds sem ég get acceptað sem ég converta í userdisplayname-->
                foreach(var m in Model.pendingRequests(Model.currentGroup.ID))
                {
                    using (Html.BeginForm("ownerOfGroupAcceptsUsers", "LoggedIn", FormMethod.Post))
                    {
                        <input type="hidden" name="userid" value=m/>
                        <input type="hidden" name="groupid" value="@Model.currentGroup.ID"/>
                        <p>@Model.getUserByID(m.userRequestId).displayName</p>
                        <input type="submit" value="Accept this user"/>
                    }
                }
            }
        }
    </div>


</body>
</html>
